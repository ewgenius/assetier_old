{
    "cells": [
        {
            "language": "typescript",
            "source": [
                "import * as fs from \"fs\";\nimport * as path from \"path\";\nimport { App } from \"@octokit/app\";\nimport { Octokit } from \"@octokit/core\";\nimport { createAppAuth } from \"@octokit/auth-app\";\n\nconst GITHUB_APP_ID = 154774;\nconst GITHUB_APP_CLIENT_ID = \"Iv1.cec85450bdba113e\";\nconst GITHUB_APP_CLIENT_SECRET = \"67ae21936b6d20752dd961dc70e4af258cdc9a6a\";\nconst INSTALLATION_ID = 21244116;\n\nasync function main() {\n  const privateKey = await new Promise<string>((resolve, reject) =>\n    fs.readFile(\n      path.resolve(\"./assetier-dev.2021-12-11.private-key-2.pem\"),\n      (err, data) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(data.toString());\n        }\n      }\n    )\n  );\n\n  const auth = createAppAuth({\n    appId: Number(GITHUB_APP_ID),\n    privateKey,\n    installationId: INSTALLATION_ID,\n    clientId: GITHUB_APP_CLIENT_ID,\n    clientSecret: GITHUB_APP_CLIENT_SECRET,\n  });\n\n  const appAuthentication = await auth({ type: \"app\" });\n\n  // console.log(appAuthentication);\n\n  const app = new App({\n    appId: Number(GITHUB_APP_ID),\n    privateKey,\n    clientId: GITHUB_APP_CLIENT_ID,\n    clientSecret: GITHUB_APP_CLIENT_SECRET,\n  });\n\n  for await (const { octokit, repository } of app.eachRepository.iterator()) {\n    console.log(repository);\n  }\n\n  // const octokit = new Octokit({\n  //   authStrategy: createAppAuth,\n  //   auth: {\n  //     appId: Number(GITHUB_APP_ID),\n  //     privateKey,\n  //     // clientId: GITHUB_APP_CLIENT_ID,\n  //     // clientSecret: GITHUB_APP_CLIENT_SECRET,\n  //     installationId: INSTALLATION_ID,\n  //   },\n  // });\n\n  // const result = await octokit.request(\"GET /user\");\n  // console.log(\"authenticated as %s\", result);\n}\n\ntry {\n  main();\n} catch (e) {\n  console.log(JSON.stringify(e, null, 2));\n}\n"
            ],
            "outputs": [
                {
                    "items": [
                        {
                            "mime": "application/vnd.code.notebook.stdout",
                            "value": [
                                "{",
                                "  id: 432187197,",
                                "  node_id: 'R_kgDOGcKnPQ',",
                                "  name: 'icon-publihser',",
                                "  full_name: 'Assetier/icon-publihser',",
                                "  private: true,",
                                "  owner: {",
                                "    login: 'Assetier',",
                                "    id: 95086834,",
                                "    node_id: 'O_kgDOBaro8g',",
                                "    avatar_url: 'https://avatars.githubusercontent.com/u/95086834?v=4',",
                                "    gravatar_id: '',",
                                "    url: 'https://api.github.com/users/Assetier',",
                                "    html_url: 'https://github.com/Assetier',",
                                "    followers_url: 'https://api.github.com/users/Assetier/followers',",
                                "    following_url: 'https://api.github.com/users/Assetier/following{/other_user}',",
                                "    gists_url: 'https://api.github.com/users/Assetier/gists{/gist_id}',",
                                "    starred_url: 'https://api.github.com/users/Assetier/starred{/owner}{/repo}',",
                                "    subscriptions_url: 'https://api.github.com/users/Assetier/subscriptions',",
                                "    organizations_url: 'https://api.github.com/users/Assetier/orgs',",
                                "    repos_url: 'https://api.github.com/users/Assetier/repos',",
                                "    events_url: 'https://api.github.com/users/Assetier/events{/privacy}',",
                                "    received_events_url: 'https://api.github.com/users/Assetier/received_events',",
                                "    type: 'Organization',",
                                "    site_admin: false",
                                "  },",
                                "  html_url: 'https://github.com/Assetier/icon-publihser',",
                                "  description: null,",
                                "  fork: false,",
                                "  url: 'https://api.github.com/repos/Assetier/icon-publihser',",
                                "  forks_url: 'https://api.github.com/repos/Assetier/icon-publihser/forks',",
                                "  keys_url: 'https://api.github.com/repos/Assetier/icon-publihser/keys{/key_id}',",
                                "  collaborators_url: 'https://api.github.com/repos/Assetier/icon-publihser/collaborators{/collaborator}',",
                                "  teams_url: 'https://api.github.com/repos/Assetier/icon-publihser/teams',",
                                "  hooks_url: 'https://api.github.com/repos/Assetier/icon-publihser/hooks',",
                                "  issue_events_url: 'https://api.github.com/repos/Assetier/icon-publihser/issues/events{/number}',",
                                "  events_url: 'https://api.github.com/repos/Assetier/icon-publihser/events',",
                                "  assignees_url: 'https://api.github.com/repos/Assetier/icon-publihser/assignees{/user}',",
                                "  branches_url: 'https://api.github.com/repos/Assetier/icon-publihser/branches{/branch}',",
                                "  tags_url: 'https://api.github.com/repos/Assetier/icon-publihser/tags',",
                                "  blobs_url: 'https://api.github.com/repos/Assetier/icon-publihser/git/blobs{/sha}',",
                                "  git_tags_url: 'https://api.github.com/repos/Assetier/icon-publihser/git/tags{/sha}',",
                                "  git_refs_url: 'https://api.github.com/repos/Assetier/icon-publihser/git/refs{/sha}',",
                                "  trees_url: 'https://api.github.com/repos/Assetier/icon-publihser/git/trees{/sha}',",
                                "  statuses_url: 'https://api.github.com/repos/Assetier/icon-publihser/statuses/{sha}',",
                                "  languages_url: 'https://api.github.com/repos/Assetier/icon-publihser/languages',",
                                "  stargazers_url: 'https://api.github.com/repos/Assetier/icon-publihser/stargazers',",
                                "  contributors_url: 'https://api.github.com/repos/Assetier/icon-publihser/contributors',",
                                "  subscribers_url: 'https://api.github.com/repos/Assetier/icon-publihser/subscribers',",
                                "  subscription_url: 'https://api.github.com/repos/Assetier/icon-publihser/subscription',",
                                "  commits_url: 'https://api.github.com/repos/Assetier/icon-publihser/commits{/sha}',",
                                "  git_commits_url: 'https://api.github.com/repos/Assetier/icon-publihser/git/commits{/sha}',",
                                "  comments_url: 'https://api.github.com/repos/Assetier/icon-publihser/comments{/number}',",
                                "  issue_comment_url: 'https://api.github.com/repos/Assetier/icon-publihser/issues/comments{/number}',",
                                "  contents_url: 'https://api.github.com/repos/Assetier/icon-publihser/contents/{+path}',",
                                "  compare_url: 'https://api.github.com/repos/Assetier/icon-publihser/compare/{base}...{head}',",
                                "  merges_url: 'https://api.github.com/repos/Assetier/icon-publihser/merges',",
                                "  archive_url: 'https://api.github.com/repos/Assetier/icon-publihser/{archive_format}{/ref}',",
                                "  downloads_url: 'https://api.github.com/repos/Assetier/icon-publihser/downloads',",
                                "  issues_url: 'https://api.github.com/repos/Assetier/icon-publihser/issues{/number}',",
                                "  pulls_url: 'https://api.github.com/repos/Assetier/icon-publihser/pulls{/number}',",
                                "  milestones_url: 'https://api.github.com/repos/Assetier/icon-publihser/milestones{/number}',",
                                "  notifications_url: 'https://api.github.com/repos/Assetier/icon-publihser/notifications{?since,all,participating}',",
                                "  labels_url: 'https://api.github.com/repos/Assetier/icon-publihser/labels{/name}',",
                                "  releases_url: 'https://api.github.com/repos/Assetier/icon-publihser/releases{/id}',",
                                "  deployments_url: 'https://api.github.com/repos/Assetier/icon-publihser/deployments',",
                                "  created_at: '2021-11-26T13:24:32Z',",
                                "  updated_at: '2021-11-26T13:24:54Z',",
                                "  pushed_at: '2021-11-26T13:24:51Z',",
                                "  git_url: 'git://github.com/Assetier/icon-publihser.git',",
                                "  ssh_url: 'git@github.com:Assetier/icon-publihser.git',",
                                "  clone_url: 'https://github.com/Assetier/icon-publihser.git',",
                                "  svn_url: 'https://github.com/Assetier/icon-publihser',",
                                "  homepage: null,",
                                "  size: 108,",
                                "  stargazers_count: 0,",
                                "  watchers_count: 0,",
                                "  language: 'TypeScript',",
                                "  has_issues: true,",
                                "  has_projects: true,",
                                "  has_downloads: true,",
                                "  has_wiki: true,",
                                "  has_pages: false,",
                                "  forks_count: 0,",
                                "  mirror_url: null,",
                                "  archived: false,",
                                "  disabled: false,",
                                "  open_issues_count: 0,",
                                "  license: null,",
                                "  allow_forking: false,",
                                "  is_template: false,",
                                "  topics: [],",
                                "  visibility: 'private',",
                                "  forks: 0,",
                                "  open_issues: 0,",
                                "  watchers: 0,",
                                "  default_branch: 'main',",
                                "  permissions: {",
                                "    admin: false,",
                                "    maintain: false,",
                                "    push: false,",
                                "    triage: false,",
                                "    pull: false",
                                "  }",
                                "}",
                                ""
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}